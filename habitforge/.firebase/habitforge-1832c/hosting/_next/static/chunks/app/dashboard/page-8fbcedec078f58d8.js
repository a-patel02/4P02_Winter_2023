(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9546:function(e,a,t){Promise.resolve().then(t.bind(t,2874))},2874:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return aR}});var s=t(7437),l=t(9842),r=t(9165),i=t(6337),n=t(6452),d=t(9870),o=t(5306),c=t(2265),u=t(4109),x=t(6648),m=t(495),h=t(3304),f=t(7440);let p=h.fC,j=h.xz,g=h.h_,b=h.x8,v=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(h.aV,{ref:a,className:(0,f.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});v.displayName=h.aV.displayName;let y=c.forwardRef((e,a)=>{let{className:t,children:l,...r}=e;return(0,s.jsxs)(g,{children:[(0,s.jsx)(v,{}),(0,s.jsx)(h.VY,{ref:a,className:(0,f.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:l})]})});y.displayName=h.VY.displayName;let N=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,f.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};N.displayName="DialogHeader";let w=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,f.cn)("flex justify-end space-x-2",a),...t})};w.displayName="DialogFooter";let k=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(h.Dx,{ref:a,className:(0,f.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});k.displayName=h.Dx.displayName,c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(h.dk,{ref:a,className:(0,f.cn)("text-sm text-muted-foreground",t),...l})}).displayName=h.dk.displayName;var C=t(9333),Z=t(9590),S=t(2468),D=t(4241),z=t(7833),I=t(2513),R=t(4122);let H=c.forwardRef((e,a)=>{let{className:t,type:l,...r}=e;return(0,s.jsx)("input",{type:l,className:(0,f.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...r})});H.displayName="Input";var U=t(6460),E=t(1014),P=t(9343),F=t(9772),_=t(1538),V=t(8364);let M=(0,t(2218).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),A=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(V.f,{ref:a,className:(0,f.cn)(M(),t),...l})});A.displayName=V.f.displayName;let L=P.RV,W=c.createContext({}),G=e=>{let{...a}=e;return(0,s.jsx)(W.Provider,{value:{name:a.name},children:(0,s.jsx)(P.Qr,{...a})})},J=()=>{let e=c.useContext(W),a=c.useContext(T),{getFieldState:t,formState:s}=(0,P.Gc)(),l=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:r}=a;return{id:r,name:e.name,formItemId:"".concat(r,"-form-item"),formDescriptionId:"".concat(r,"-form-item-description"),formMessageId:"".concat(r,"-form-item-message"),...l}},T=c.createContext({}),O=c.forwardRef((e,a)=>{let{className:t,...l}=e,r=c.useId();return(0,s.jsx)(T.Provider,{value:{id:r},children:(0,s.jsx)("div",{ref:a,className:(0,f.cn)("space-y-2",t),...l})})});O.displayName="FormItem";let B=c.forwardRef((e,a)=>{let{className:t,...l}=e,{error:r,formItemId:i}=J();return(0,s.jsx)(A,{ref:a,className:(0,f.cn)(r&&"text-destructive",t),htmlFor:i,...l})});B.displayName="FormLabel";let Y=c.forwardRef((e,a)=>{let{...t}=e,{error:l,formItemId:r,formDescriptionId:i,formMessageId:n}=J();return(0,s.jsx)(_.g7,{ref:a,id:r,"aria-describedby":l?"".concat(i," ").concat(n):"".concat(i),"aria-invalid":!!l,...t})});Y.displayName="FormControl",c.forwardRef((e,a)=>{let{className:t,...l}=e,{formDescriptionId:r}=J();return(0,s.jsx)("p",{ref:a,id:r,className:(0,f.cn)("text-[0.8rem] text-muted-foreground",t),...l})}).displayName="FormDescription";let K=c.forwardRef((e,a)=>{let{className:t,children:l,...r}=e,{error:i,formMessageId:n}=J(),d=i?String(null==i?void 0:i.message):l;return d?(0,s.jsx)("p",{ref:a,id:n,className:(0,f.cn)("text-[0.8rem] font-medium text-destructive",t),...r,children:d}):null});K.displayName="FormMessage";var X=t(4867),q=t(5565);let Q=q.fC,$=q.ZA,ee=q.B4,ea=c.forwardRef((e,a)=>{let{className:t,children:l,...r}=e;return(0,s.jsxs)(q.xz,{ref:a,className:(0,f.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[l,(0,s.jsx)(q.JO,{asChild:!0,children:(0,s.jsx)(X.jnn,{className:"h-4 w-4 opacity-50"})})]})});ea.displayName=q.xz.displayName;let et=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(q.u_,{ref:a,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,s.jsx)(X.g8U,{})})});et.displayName=q.u_.displayName;let es=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(q.$G,{ref:a,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,s.jsx)(X.v4q,{})})});es.displayName=q.$G.displayName;let el=c.forwardRef((e,a)=>{let{className:t,children:l,position:r="popper",...i}=e;return(0,s.jsx)(q.h_,{children:(0,s.jsxs)(q.VY,{ref:a,className:(0,f.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...i,children:[(0,s.jsx)(et,{}),(0,s.jsx)(q.l_,{className:(0,f.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,s.jsx)(es,{})]})})});el.displayName=q.VY.displayName,c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(q.__,{ref:a,className:(0,f.cn)("px-2 py-1.5 text-sm font-semibold",t),...l})}).displayName=q.__.displayName;let er=c.forwardRef((e,a)=>{let{className:t,children:l,...r}=e;return(0,s.jsxs)(q.ck,{ref:a,className:(0,f.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(q.wU,{children:(0,s.jsx)(X.nQG,{className:"h-4 w-4"})})}),(0,s.jsx)(q.eT,{children:l})]})});er.displayName=q.ck.displayName,c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(q.Z0,{ref:a,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=q.Z0.displayName;var ei=t(1485);let en=ei.fC,ed=ei.xz;ei.ee;let eo=c.forwardRef((e,a)=>{let{className:t,align:l="center",sideOffset:r=4,...i}=e;return(0,s.jsx)(ei.VY,{ref:a,align:l,sideOffset:r,className:(0,f.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})});eo.displayName=ei.VY.displayName;var ec=t(3045);function eu(e){let{className:a,classNames:t,showOutsideDays:l=!0,...r}=e;return(0,s.jsx)(ec._W,{showOutsideDays:l,className:(0,f.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,f.cn)((0,m.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,f.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===r.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,f.cn)((0,m.d)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{...a}=e;return(0,s.jsx)(X.wyc,{className:"h-4 w-4"})},IconRight:e=>{let{...a}=e;return(0,s.jsx)(X.XCv,{className:"h-4 w-4"})}},...r})}eu.displayName="Calendar";var ex=t(7776),em=t(2447);let eh=em.fC,ef=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(em.aV,{ref:a,className:(0,f.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...l})});ef.displayName=em.aV.displayName;let ep=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(em.xz,{ref:a,className:(0,f.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...l})});ep.displayName=em.xz.displayName;let ej=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(em.VY,{ref:a,className:(0,f.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...l})});ej.displayName=em.VY.displayName;var eg=t(8296),eb=t(9654),ev=t(2092),ey=t(5525),eN=t(5293),ew=t(7200),ek=t(4596),eC=t(9913),eZ=t(9453),eS=t(233),eD=t(2332),ez=t(6540),eI=t(795),eR=t(2335),eH=t(1609),eU=t(4381),eE=t(8055),eP=t(4501),eF=t(9778),e_=t(8758),eV=t(3855),eM=t(2728),eA=t(4975),eL=t(2177),eW=t(3894);let eG={Sun:(0,s.jsx)(eg.Z,{}),GlassWater:(0,s.jsx)(eb.Z,{}),Smile:(0,s.jsx)(ev.Z,{}),Dumbbell:(0,s.jsx)(ey.Z,{}),Leaf:(0,s.jsx)(eN.Z,{}),Vegan:(0,s.jsx)(ew.Z,{}),AlarmClock:(0,s.jsx)(ek.Z,{}),Pen:(0,s.jsx)(eC.Z,{}),CigaretteOff:(0,s.jsx)(eZ.Z,{}),Camera:(0,s.jsx)(eS.Z,{}),CakeSlice:(0,s.jsx)(eD.Z,{}),BookOpen:(0,s.jsx)(ez.Z,{}),WineOff:(0,s.jsx)(eI.Z,{}),Bike:(0,s.jsx)(eR.Z,{}),Sprout:(0,s.jsx)(eH.Z,{}),Apple:(0,s.jsx)(eU.Z,{}),Banana:(0,s.jsx)(eE.Z,{}),Palette:(0,s.jsx)(eP.Z,{}),Bed:(0,s.jsx)(eF.Z,{}),Coffee:(0,s.jsx)(e_.Z,{}),CalendarCheck:(0,s.jsx)(eV.Z,{}),CandyOff:(0,s.jsx)(eM.Z,{}),Dribbble:(0,s.jsx)(eA.Z,{}),Gamepad2:(0,s.jsx)(eL.Z,{}),Drum:(0,s.jsx)(eW.Z,{})};function eJ(e){let{color:a,icon:t,setColor:l,setIcon:r,className:i}=e;return(0,s.jsxs)(en,{children:[(0,s.jsx)(ed,{asChild:!0,children:(0,s.jsx)(m.z,{variant:"outline",type:"button",size:"icon",className:" w-12 ",children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("div",{className:"text-".concat(a,"-500"),children:eG[t]})})})}),(0,s.jsx)(eo,{className:"w-64",children:(0,s.jsxs)(eh,{defaultValue:"icons",className:"w-full",children:[(0,s.jsxs)(ef,{className:"w-full mb-4",children:[(0,s.jsx)(ep,{className:"flex-1",value:"icons",children:"Icons"}),(0,s.jsx)(ep,{className:"flex-1",value:"colors",children:"Colors"})]}),(0,s.jsx)(ej,{value:"colors",className:"flex flex-wrap gap-1 mt-0",children:["blue","orange","red","pink","purple","indigo","cyan","teal","green","lime","yellow","amber"].map(e=>(0,s.jsx)("div",{className:"rounded-md h-6 w-6 cursor-pointer active:scale-105 bg-".concat(e,"-100"),onClick:()=>l(e)},e))}),(0,s.jsx)(ej,{value:"icons",className:"flex flex-wrap gap-2 mt-0 justify-center",children:Object.keys(eG).map(e=>(0,s.jsx)(m.z,{variant:"ghost",size:"icon",type:"button",onClick:()=>r(e),children:eG[e]},e))})]})})]})}var eT=t(8422),eO=e=>{let{label:a,text:t,audioStage:l}=e;return(0,s.jsxs)("div",{className:"flex justify-between w-full items-center border-b pb-2",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(d.Z,{variant:"p",affects:"muted",className:"!mt-0",children:a}),(0,s.jsx)(d.Z,{variant:"p",className:"!mt-0 font-bold",affects:"small",children:t})]}),(0,s.jsx)(m.z,{variant:"ghost",size:"icon",onClick:l,children:(0,s.jsx)(eT.Z,{className:"h-5"})})]})};function eB(e){let[a,t]=c.useState(!1);return c.useEffect(()=>{function a(e){t(e.matches)}let s=matchMedia(e);return s.addEventListener("change",a),t(s.matches),()=>s.removeEventListener("change",a)},[e]),a}var eY=t(7213);let eK=c.createContext({}),eX=e=>{let{shouldScaleBackground:a=!0,...t}=e;return(0,s.jsx)(eK.Provider,{value:{direction:t.direction},children:(0,s.jsx)(eY.d.Root,{shouldScaleBackground:a,...t})})};eX.displayName="Drawer";let eq=eY.d.Trigger,eQ=eY.d.Portal;eY.d.Close;let e$=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(eY.d.Overlay,{ref:a,className:(0,f.cn)("fixed inset-0 z-50 bg-black/80",t),...l})});e$.displayName=eY.d.Overlay.displayName;let e0=c.forwardRef((e,a)=>{let{className:t,children:l,...r}=e,{direction:i}=c.useContext(eK);return(0,s.jsxs)(eQ,{children:[(0,s.jsx)(e$,{}),(0,s.jsxs)(eY.d.Content,{ref:a,className:(0,f.cn)("fixed z-50  flex h-auto flex-col rounded-t-[10px] border bg-background",(!i||"bottom"===i)&&"inset-x-0 bottom-0 mt-24","left"===i&&"top-0 left-0 w-screen max-w-80 h-full",t),...r,children:[(!i||"bottom"===i)&&(0,s.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),l]})]})});e0.displayName="DrawerContent";let e1=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,f.cn)("grid gap-1.5 p-4 text-center sm:text-left",a),...t})};e1.displayName="DrawerHeader";let e2=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,f.cn)("mt-auto flex flex-col gap-2 p-4",a),...t})};e2.displayName="DrawerFooter";let e4=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(eY.d.Title,{ref:a,className:(0,f.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});e4.displayName=eY.d.Title.displayName,c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(eY.d.Description,{ref:a,className:(0,f.cn)("text-sm text-muted-foreground",t),...l})}).displayName=eY.d.Description.displayName;var e5=()=>{let[e,a]=(0,c.useState)(""),[t,s]=(0,c.useState)(!1),[l,r]=(0,c.useState)(!1),[i,n]=(0,c.useState)(null),d=(0,c.useRef)(null);(0,c.useEffect)(()=>{if("webkitSpeechRecognition"in window){let e=new window.webkitSpeechRecognition;e.continuous=!0,e.lang="en-US",e.onresult=e=>{d.current&&clearTimeout(d.current),a(e.results[e.resultIndex][0].transcript),s(!1),d.current=window.setTimeout(()=>{o(),console.log("Stopped listening since user didn't talk for 10 seconds")},1e4)},e.onerror=e=>{console.error("Speech recognition error:",e.error),s(!1)},n(e),r(!0)}},[]);let o=()=>{i&&(s(!1),i.stop(),d.current&&(clearTimeout(d.current),d.current=null))};return(0,c.useEffect)(()=>()=>{i&&i.stop(),d.current&&clearTimeout(d.current)},[i]),{text:e,isListening:t,startListening:()=>{i&&(a(""),s(!0),i.start(),d.current=window.setTimeout(()=>{o(),console.log("Stopped listening since user didn't talk for 10 seconds")},1e4))},stopListening:o,hasRecognitionSupport:l}};let e3=F.z.object({habitname:F.z.string().min(2,{message:"Habit names must be at least 2 characters long"}).max(25,{message:"Habit names cannot be longer than 25 characters"}),goal:F.z.string().min(1).max(12),repeat:F.z.enum(["daily","weekly","monthly"]),startdate:F.z.date()});var e6=e=>{let{edit:a,hUID:t,habitName:i,goal:o,color:u,icon:x,repeat:h,isMaxHabits:g}=e,{text:v,isListening:F,startListening:_,stopListening:V,hasRecognitionSupport:M}=e5(),[A,W,J]=(0,n.F_)(r.I8),T=eB("(min-width: 768px)"),[X,q]=(0,c.useState)(!1),et=(0,P.cI)({resolver:(0,E.F)(e3),defaultValues:{habitname:i||"My Habit",goal:(null==o?void 0:o.toString())||"1",repeat:h||"daily",startdate:new Date}}),es=e=>{ei(e),et.reset(),ef("Sun"),em("blue"),q(!1),a?ex.A.success("Habit has been edited \uD83D\uDE0E"):ex.A.success("Habit has been created \uD83D\uDE0E")},ei=async e=>{if(A){if(a&&t)await (0,l.r7)((0,l.JU)(r.db,"users",A.uid,"habits",t),{timestamp:(0,l.Bt)(),habitName:e.habitname,goal:e.goal,repeat:e.repeat,startDate:e.startdate,icon:eh,color:ec});else{let a=await (0,l.ET)((0,l.hJ)(r.db,"users",A.uid,"habits"),{timestamp:(0,l.Bt)(),habitName:e.habitname,goal:e.goal,repeat:e.repeat,startDate:e.startdate,tracked:!1,completed:!1,skipped:!1,failed:!1,totalCompleted:0,totalSkipped:0,totalFailed:0,streak:0,lastCompletedDate:"",hUID:"",icon:eh,color:ec});await (0,l.r7)(a,{hUID:a.id})}}},[ec,em]=(0,c.useState)(u||"blue"),[eh,ef]=(0,c.useState)(x||"Sun"),[ep,ej]=(0,c.useState)(!1),[eg,eb]=(0,c.useState)("My Habit"),[ev,ey]=(0,c.useState)("1"),[eN,ew]=(0,c.useState)("Daily"),[ek,eC]=(0,c.useState)(new Date),[eZ,eS]=(0,c.useState)(0),eD=async()=>{if(A){let e=await (0,l.ET)((0,l.hJ)(r.db,"users",A.uid,"habits"),{timestamp:(0,l.Bt)(),habitName:eg,goal:ev,repeat:eN,startDate:ek,tracked:!1,completed:!1,skipped:!1,failed:!1,totalCompleted:0,totalSkipped:0,totalFailed:0,streak:0,lastCompletedDate:"",hUID:"",icon:eh,color:ec});await (0,l.r7)(e,{hUID:e.id})}},ez=()=>{eD(),ej(!1),eb("My Habit"),ey("1"),ew("Daily"),eC(void 0),eS(0),ef("Sun"),em("blue"),ex.A.success("Habit has been created \uD83D\uDE0E")};(0,c.useEffect)(()=>{if(!F){if(1===eZ)v.length<=25?(eb(v),console.log("WE ARE IN STAGE 1TEXT IS: "+v)):eb("Habit name must be less than 25 characters");else if(3===eZ){let e={zero:0,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10}[v.toLowerCase()];void 0!==e?isNaN(e)||(ey(e.toString()),console.log("WE ARE IN STAGE 3")):ey("Please only say a number")}else 5===eZ&&(["daily","weekly","monthly","Daily","Weekly","Monthly"].includes(v)?(ew(v),console.log("WE ARE IN STAGE 5TEXT IS: "+v)):(console.log("Text does not match allowed words. Text is: "+v),ew("Options are either daily, weekly, or Monthly")))}},[F,v,eZ]);let eI=()=>{switch(eZ){case 0:return(0,s.jsxs)("div",{className:"flex flex-col gap-6 justify-center items-center",children:[(0,s.jsx)(d.Z,{variant:"h4",children:"What will we call your habit?"}),(0,s.jsx)("div",{className:"flex gap-6",children:(0,s.jsx)(m.z,{variant:"audioPrimary",onClick:()=>{eS(eZ+1),F?V():_()},children:(0,s.jsx)(C.Z,{})})})]});case 1:return(0,s.jsxs)("div",{className:"flex flex-col gap-6 justify-center items-center",children:[(0,s.jsx)(d.Z,{variant:"h4",children:"What will we call your habit?"}),(0,s.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,s.jsx)(H,{value:eg,disabled:!0}),(0,s.jsx)(eJ,{color:ec,icon:eh,setColor:em,setIcon:ef})]}),(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)(m.z,{variant:"audioSecondary",onClick:()=>eS(eZ-1),children:(0,s.jsx)(Z.Z,{})}),(0,s.jsx)(m.z,{variant:"audioPrimary",onClick:()=>{V(),eS(eZ+1)},children:(0,s.jsx)(S.Z,{})})]})]});case 2:return(0,s.jsxs)("div",{className:"flex flex-col gap-6 justify-center items-center",children:[(0,s.jsx)(eO,{text:eg,label:"Habit Name",audioStage:()=>eS(2)}),(0,s.jsx)(d.Z,{variant:"h4",children:"How many times in a day?"}),(0,s.jsx)("div",{className:"flex gap-6",children:(0,s.jsx)(m.z,{variant:"audioPrimary",onClick:()=>{eS(eZ+1),F?V():_()},children:(0,s.jsx)(C.Z,{})})})]});case 3:return(0,s.jsxs)("div",{className:"flex flex-col gap-6 justify-center items-center",children:[(0,s.jsx)(eO,{text:eg,label:"Habit Name",audioStage:()=>eS(3)}),(0,s.jsx)(d.Z,{variant:"h4",children:"How many times in a day?"}),(0,s.jsx)(H,{value:ev,disabled:!0}),(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)(m.z,{variant:"audioSecondary",onClick:()=>eS(eZ-1),children:(0,s.jsx)(Z.Z,{})}),(0,s.jsx)(m.z,{variant:"audioPrimary",onClick:()=>{V(),eS(eZ+1)},children:(0,s.jsx)(S.Z,{})})]})]});case 4:return(0,s.jsxs)("div",{className:"flex flex-col gap-6 justify-center items-center",children:[(0,s.jsx)(eO,{text:eg,label:"Habit Name",audioStage:()=>eS(1)}),(0,s.jsx)(eO,{text:ev+" /per day",label:"Goal",audioStage:()=>eS(3)}),(0,s.jsx)(d.Z,{variant:"h4",children:"How often should this habit repeat?"}),(0,s.jsx)("div",{className:"flex gap-6",children:(0,s.jsx)(m.z,{variant:"audioPrimary",onClick:()=>{eS(eZ+1),F?V():_()},children:(0,s.jsx)(C.Z,{})})})]});case 5:return(0,s.jsxs)("div",{className:"flex flex-col gap-6 justify-center items-center",children:[(0,s.jsx)(eO,{text:eg,label:"Habit Name",audioStage:()=>eS(1)}),(0,s.jsx)(eO,{text:ev+" /per day",label:"Goal",audioStage:()=>eS(3)}),(0,s.jsxs)(d.Z,{variant:"h4",children:[" ","How often should this habit repeat?"]}),(0,s.jsx)(H,{value:eN,disabled:!0}),(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)(m.z,{variant:"audioSecondary",onClick:()=>eS(eZ-1),children:(0,s.jsx)(Z.Z,{})}),(0,s.jsx)(m.z,{variant:"audioPrimary",onClick:()=>{V(),eS(eZ+1)},children:(0,s.jsx)(S.Z,{})})]})]});case 6:return(0,s.jsxs)("div",{className:"flex flex-col gap-6 justify-center items-center",children:[(0,s.jsx)(eO,{text:eg,label:"Habit Name",audioStage:()=>eS(1)}),(0,s.jsx)(eO,{text:ev+" /per day",label:"Goal",audioStage:()=>eS(3)}),(0,s.jsx)(eO,{text:eN,label:"Repeat",audioStage:()=>eS(5)}),(0,s.jsx)(d.Z,{variant:"h4",children:"When do you want to start?"}),(0,s.jsxs)(en,{children:[(0,s.jsx)(ed,{asChild:!0,children:(0,s.jsxs)(m.z,{variant:"outline",className:(0,f.cn)("w-[280px] justify-start text-left font-normal",!ek&&"text-muted-foreground"),children:[(0,s.jsx)(D.Z,{className:"mr-2 h-4 w-4"}),ek?(0,U.WU)(ek,"PPP"):(0,s.jsx)("span",{children:"Pick a date"})]})}),(0,s.jsx)(eo,{className:"w-auto p-0",children:(0,s.jsx)(eu,{mode:"single",selected:ek,onSelect:eC,initialFocus:!0})})]}),(0,s.jsx)("div",{className:"flex gap-6",children:(0,s.jsx)(b,{children:(0,s.jsx)(m.z,{variant:"audioPrimary",onClick:ez,children:(0,s.jsx)(S.Z,{})})})})]});default:return(0,s.jsx)(s.Fragment,{})}};return T?(0,s.jsxs)(p,{open:X,onOpenChange:q,children:[(0,s.jsx)(j,{asChild:!0,children:(0,s.jsxs)(m.z,{disabled:g,variant:a?"secondary":"default",children:[a?(0,s.jsx)(z.Z,{}):(0,s.jsx)(I.Z,{}),a?"Edit Habit":"Add Habit"]})}),(0,s.jsxs)(y,{className:"sm:max-w-[425px]",children:[(0,s.jsx)(N,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(k,{children:"New Habit"}),a?(0,s.jsx)(s.Fragment,{}):ep?(0,s.jsx)(m.z,{variant:"ghost",size:"icon",onClick:()=>ej(!1),children:(0,s.jsx)(R.Z,{className:"text-primary"})}):(0,s.jsx)(m.z,{variant:"ghost",size:"icon",onClick:()=>ej(!0),children:(0,s.jsx)(C.Z,{className:"text-destructive"})})]})}),ep?(0,s.jsx)(eI,{}):(0,s.jsx)(L,{...et,children:(0,s.jsxs)("form",{onSubmit:et.handleSubmit(es),className:"w-full flex flex-col gap-4",children:[(0,s.jsx)(G,{control:et.control,name:"habitname",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsx)(B,{children:"Habit Name"}),(0,s.jsx)(Y,{children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(H,{...a,placeholder:"Habit Name"}),(0,s.jsx)(eJ,{color:ec,icon:eh,setColor:em,setIcon:ef})]})}),(0,s.jsx)(K,{})]})}}),(0,s.jsx)(G,{control:et.control,name:"goal",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsxs)(B,{children:["Goal"," ",(0,s.jsx)("span",{className:" text-muted-foreground ",children:"/per day"})]}),(0,s.jsxs)(Q,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(Y,{children:(0,s.jsx)(ea,{children:(0,s.jsx)(ee,{placeholder:"Number of times to perform habit in a day"})})}),(0,s.jsx)(el,{className:" max-h-48",children:(0,s.jsxs)($,{children:[(0,s.jsx)(er,{value:"1",children:"1"}),(0,s.jsx)(er,{value:"2",children:"2"}),(0,s.jsx)(er,{value:"3",children:"3"}),(0,s.jsx)(er,{value:"4",children:"4"}),(0,s.jsx)(er,{value:"5",children:"5"}),(0,s.jsx)(er,{value:"6",children:"6"}),(0,s.jsx)(er,{value:"7",children:"7"}),(0,s.jsx)(er,{value:"8",children:"8"}),(0,s.jsx)(er,{value:"9",children:"9"}),(0,s.jsx)(er,{value:"10",children:"10"}),(0,s.jsx)(er,{value:"11",children:"11"}),(0,s.jsx)(er,{value:"12",children:"12"})]})})]}),(0,s.jsx)(K,{})]})}}),(0,s.jsx)(G,{control:et.control,name:"repeat",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsx)(B,{children:"Repeat"}),(0,s.jsxs)(Q,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(Y,{children:(0,s.jsx)(ea,{children:(0,s.jsx)(ee,{placeholder:"When to repeat habit"})})}),(0,s.jsx)(el,{children:(0,s.jsxs)($,{children:[(0,s.jsx)(er,{value:"daily",children:"Daily"}),(0,s.jsx)(er,{value:"weekly",children:"Weekly"}),(0,s.jsx)(er,{value:"monthly",children:"Monthly"})]})})]}),(0,s.jsx)(K,{})]})}}),(0,s.jsx)(G,{control:et.control,name:"startdate",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{className:"flex flex-col",children:[(0,s.jsx)(B,{children:"Start Date"}),(0,s.jsxs)(en,{children:[(0,s.jsx)(ed,{asChild:!0,children:(0,s.jsx)(Y,{children:(0,s.jsxs)(m.z,{variant:"outline",className:(0,f.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,U.WU)(a.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"}),(0,s.jsx)(D.Z,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(eo,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(eu,{mode:"single",selected:a.value,onSelect:a.onChange,initialFocus:!0})})]}),(0,s.jsx)(K,{})]})}}),(0,s.jsxs)(w,{children:[(0,s.jsx)(b,{children:(0,s.jsx)(m.z,{variant:"outline",type:"button",children:"Cancel"})}),(0,s.jsx)(m.z,{type:"submit",children:"Save"})]})]})})]})]}):(0,s.jsxs)(eX,{open:X,onOpenChange:q,children:[(0,s.jsx)(eq,{asChild:!0,children:(0,s.jsxs)(m.z,{variant:a?"secondary":"default",disabled:g,children:[a?(0,s.jsx)(z.Z,{}):(0,s.jsx)(I.Z,{}),a?"Edit Habit":"Add Habit"]})}),(0,s.jsxs)(e0,{className:"px-6",children:[(0,s.jsx)(e1,{className:"text-left",children:(0,s.jsxs)("div",{className:"flex justify-between items-centern w-full",children:[(0,s.jsx)(e4,{children:"New Habit"}),a?(0,s.jsx)(s.Fragment,{}):ep?(0,s.jsx)(m.z,{variant:"ghost",size:"icon",onClick:()=>ej(!1),children:(0,s.jsx)(R.Z,{className:"text-primary"})}):(0,s.jsx)(m.z,{variant:"ghost",size:"icon",onClick:()=>ej(!0),children:(0,s.jsx)(C.Z,{className:"text-destructive"})})]})}),ep?(0,s.jsx)(eI,{}):(0,s.jsx)(L,{...et,children:(0,s.jsxs)("form",{onSubmit:et.handleSubmit(es),className:"w-full flex flex-col gap-4",children:[(0,s.jsx)(G,{control:et.control,name:"habitname",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsx)(B,{children:"Habit Name"}),(0,s.jsx)(Y,{children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(H,{...a,placeholder:"Habit Name"}),(0,s.jsx)(eJ,{color:ec,icon:eh,setColor:em,setIcon:ef})]})}),(0,s.jsx)(K,{})]})}}),(0,s.jsx)(G,{control:et.control,name:"goal",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsxs)(B,{children:["Goal"," ",(0,s.jsx)("span",{className:" text-muted-foreground ",children:"/per day"})]}),(0,s.jsxs)(Q,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(Y,{children:(0,s.jsx)(ea,{children:(0,s.jsx)(ee,{placeholder:"Number of times to perform habit in a day"})})}),(0,s.jsx)(el,{className:" max-h-48",children:(0,s.jsxs)($,{children:[(0,s.jsx)(er,{value:"1",children:"1"}),(0,s.jsx)(er,{value:"2",children:"2"}),(0,s.jsx)(er,{value:"3",children:"3"}),(0,s.jsx)(er,{value:"4",children:"4"}),(0,s.jsx)(er,{value:"5",children:"5"}),(0,s.jsx)(er,{value:"6",children:"6"}),(0,s.jsx)(er,{value:"7",children:"7"}),(0,s.jsx)(er,{value:"8",children:"8"}),(0,s.jsx)(er,{value:"9",children:"9"}),(0,s.jsx)(er,{value:"10",children:"10"}),(0,s.jsx)(er,{value:"11",children:"11"}),(0,s.jsx)(er,{value:"12",children:"12"})]})})]}),(0,s.jsx)(K,{})]})}}),(0,s.jsx)(G,{control:et.control,name:"repeat",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsx)(B,{children:"Repeat"}),(0,s.jsxs)(Q,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(Y,{children:(0,s.jsx)(ea,{children:(0,s.jsx)(ee,{placeholder:"When to repeat habit"})})}),(0,s.jsx)(el,{children:(0,s.jsxs)($,{children:[(0,s.jsx)(er,{value:"daily",children:"Daily"}),(0,s.jsx)(er,{value:"weekly",children:"Weekly"}),(0,s.jsx)(er,{value:"monthly",children:"Monthly"})]})})]}),(0,s.jsx)(K,{})]})}}),(0,s.jsx)(G,{control:et.control,name:"startdate",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{className:"flex flex-col",children:[(0,s.jsx)(B,{children:"Start Date"}),(0,s.jsxs)(en,{children:[(0,s.jsx)(ed,{asChild:!0,children:(0,s.jsx)(Y,{children:(0,s.jsxs)(m.z,{variant:"outline",className:(0,f.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,U.WU)(a.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"}),(0,s.jsx)(D.Z,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(eo,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(eu,{mode:"single",selected:a.value,onSelect:a.onChange,initialFocus:!0})})]}),(0,s.jsx)(K,{})]})}}),(0,s.jsxs)(w,{children:[(0,s.jsx)(b,{children:(0,s.jsx)(m.z,{variant:"outline",type:"button",children:"Cancel"})}),(0,s.jsx)(m.z,{type:"submit",children:"Save"})]})]})}),(0,s.jsx)(e2,{})]})]})},e8=()=>(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-12",children:[(0,s.jsx)(d.Z,{variant:"h2",children:"Create your first habit"}),(0,s.jsx)(x.default,{src:"FirstHabit.svg",alt:"Description",width:475,height:284}),(0,s.jsxs)("div",{className:"flex flex-col items-center text-center gap-2",children:[(0,s.jsx)(d.Z,{variant:"h4",children:" Start your journey!"}),(0,s.jsx)(d.Z,{variant:"p",affects:"muted",className:"!mt-0",children:"One habit at a time you can accomplish any goal you set out too!"})]}),(0,s.jsx)(e6,{})]}),e7=t(1266),e9=t(1326),ae=e=>{let{title:a,description:t,main:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col  ".concat(l?"":"ml-[72px] md:m-0"),children:[(0,s.jsx)(d.Z,{variant:"p",affects:"removePMargin",className:"text-lg",children:a}),(0,s.jsx)(d.Z,{variant:"p",affects:"muted",className:"!mt-0 text-muted-foreground",children:t})]})},aa=t(4697),at=t(1976),as=t(399),al=t(5797),ar=t(7071);let ai=ar.zt,an=ar.fC,ad=ar.xz,ao=c.forwardRef((e,a)=>{let{className:t,sideOffset:l=4,...r}=e;return(0,s.jsx)(ar.VY,{ref:a,sideOffset:l,className:(0,f.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})});ao.displayName=ar.VY.displayName;var ac=t(4458);let au=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(ac.fC,{ref:a,className:(0,f.cn)("relative flex h-8 w-8 shrink-0 overflow-hidden rounded-full ",t),...l})});au.displayName=ac.fC.displayName;let ax=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(ac.Ee,{ref:a,className:(0,f.cn)("aspect-square h-full w-full",t),...l})});ax.displayName=ac.Ee.displayName;let am=c.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(ac.NY,{ref:a,className:(0,f.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...l})});am.displayName=ac.NY.displayName;let ah=F.z.object({habitname:F.z.string().min(2,{message:"Habit names must be at least 2 characters long"}).max(25,{message:"Habit names cannot be longer than 25 characters"}),goal:F.z.string().min(1).max(12),repeat:F.z.enum(["daily","weekly","monthly"]),startdate:F.z.date()}),af=F.z.object({email:F.z.string().email()});var ap=e=>{let{edit:a,hUID:t,habitName:o,goal:u,color:x,icon:h,repeat:g,groupEmails:v,groupID:C,isMaxHabits:Z}=e,[S,R,F]=(0,n.F_)(r.I8),[_,V,M]=(0,i.d4)((0,l.hJ)(r.db,"users")),[A,W]=(0,c.useState)(null!=x?x:"blue"),[J,T]=(0,c.useState)(null!=h?h:"Sun"),X=eB("(min-width: 768px)"),[q,et]=(0,c.useState)(!1),[es,ei]=(0,c.useState)(null!=v?v:[]),[ec,em]=(0,c.useState)([]),eh=(0,P.cI)({resolver:(0,E.F)(ah),defaultValues:{habitname:o||"My Habit",goal:(null==u?void 0:u.toString())||"1",repeat:g||"daily",startdate:new Date}}),ef=(0,P.cI)({resolver:(0,E.F)(af),defaultValues:{email:""}}),ep=e=>{ei(a=>[...a,e.email]),ef.reset()},ej=()=>{null==_||_.map(e=>{es.includes(e.email)&&(null==S?void 0:S.uid)!==e.uid&&ec.push(e.uid)})},eg=async e=>{if(S){if(a&&t&&C){if(await (0,l.r7)((0,l.JU)(r.db,"users",S.uid,"habits",t),{timestamp:(0,l.Bt)(),habitName:e.habitname,goal:e.goal,repeat:e.repeat,startDate:e.startdate,icon:J,color:A}),ec.forEach(async e=>{null==_||_.map(async a=>{a.uid===e&&await (0,l.pl)((0,l.JU)(r.db,"groups",C,"members",a.uid),{uid:a.uid,email:a.email,displayName:a.displayName,photoURL:a.photoURL,status:"pending"})})}),ec.length>0){let s=a?" has edited your Group Habit to ":" has invited you to join their Group Habit: ";ec.forEach(async i=>{await (0,l.pl)((0,l.JU)(r.db,"users",i,"notifications",C),{timestamp:(0,l.Bt)(),title:S.displayName+s+e.habitname,senderUID:S.uid,hUID:t,status:"pending",groupID:C,edit:a})})}}else{let a=await (0,l.ET)((0,l.hJ)(r.db,"users",S.uid,"habits"),{timestamp:(0,l.Bt)(),habitName:e.habitname,goal:e.goal,repeat:e.repeat,startDate:e.startdate,tracked:!1,completed:!1,skipped:!1,failed:!1,totalCompleted:0,totalSkipped:0,totalFailed:0,streak:0,lastCompletedDate:"",hUID:"",icon:J,color:A,groupID:""});await (0,l.r7)(a,{hUID:a.id});let t=await (0,l.ET)((0,l.hJ)(r.db,"groups"),{hUID:a.id,groupID:""});await (0,l.r7)(t,{groupID:t.id}),await (0,l.r7)(a,{groupID:t.id}),await (0,l.pl)((0,l.JU)(r.db,"groups",t.id,"members",S.uid),{uid:S.uid,email:S.email,displayName:S.displayName,photoURL:S.photoURL,status:"accepted"}),ec.forEach(async e=>{null==_||_.map(async a=>{a.uid===e&&await (0,l.pl)((0,l.JU)(r.db,"groups",t.id,"members",a.uid),{uid:a.uid,email:a.email,displayName:a.displayName,photoURL:a.photoURL,status:"pending"})})}),ec.length>0&&ec.forEach(async s=>{await (0,l.pl)((0,l.JU)(r.db,"users",s,"notifications",t.id),{timestamp:(0,l.Bt)(),title:S.displayName+" has invited you to join their Group Habit: "+e.habitname,senderUID:S.uid,hUID:a.id,status:"pending",groupID:t.id})})}}},eb=e=>{ej(),eg(e),eh.reset(),T("Sun"),W("blue"),ei([]),em([]),et(!1),a?ex.A.success("Habit has been edited \uD83D\uDE0E"):ex.A.success("Habit has been created \uD83D\uDE0E")};return X?(0,s.jsxs)(p,{open:q,onOpenChange:et,children:[(0,s.jsx)(j,{asChild:!0,children:(0,s.jsxs)(m.z,{onClick:()=>{eh.reset(),ef.reset(),console.log("groupEmails: ",v),ei(null!=v?v:[]),T(null!=h?h:"Sun"),W(null!=x?x:"blue")},variant:a?"secondary":"default",disabled:Z,children:[a?(0,s.jsx)(z.Z,{}):(0,s.jsx)(I.Z,{}),a?"Edit Habit":"Add Habit"]})}),(0,s.jsxs)(y,{className:"sm:max-w-[425px]",children:[(0,s.jsx)(N,{children:(0,s.jsx)(k,{children:a?"Edit Habit":"New Habit"})}),(0,s.jsx)(L,{...eh,children:(0,s.jsxs)("form",{onSubmit:eh.handleSubmit(eb),className:"w-full flex flex-col gap-4",id:"habit-form",children:[(0,s.jsx)(G,{control:eh.control,name:"habitname",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsx)(B,{children:" Habit Name"}),(0,s.jsx)(Y,{children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(H,{...a,placeholder:"Habit Name"}),(0,s.jsx)(eJ,{color:A,icon:J,setColor:W,setIcon:T})]})}),(0,s.jsx)(K,{})]})}}),(0,s.jsx)(G,{control:eh.control,name:"goal",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsxs)(B,{children:["Goal"," ",(0,s.jsx)("span",{className:" text-muted-foreground ",children:"/per day"})]}),(0,s.jsxs)(Q,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(Y,{children:(0,s.jsx)(ea,{children:(0,s.jsx)(ee,{placeholder:"Number of times to perform habit in a day"})})}),(0,s.jsx)(el,{className:" max-h-48",children:(0,s.jsxs)($,{children:[(0,s.jsx)(er,{value:"1",children:"1"}),(0,s.jsx)(er,{value:"2",children:"2"}),(0,s.jsx)(er,{value:"3",children:"3"}),(0,s.jsx)(er,{value:"4",children:"4"}),(0,s.jsx)(er,{value:"5",children:"5"}),(0,s.jsx)(er,{value:"6",children:"6"}),(0,s.jsx)(er,{value:"7",children:"7"}),(0,s.jsx)(er,{value:"8",children:"8"}),(0,s.jsx)(er,{value:"9",children:"9"}),(0,s.jsx)(er,{value:"10",children:"10"}),(0,s.jsx)(er,{value:"11",children:"11"}),(0,s.jsx)(er,{value:"12",children:"12"})]})})]}),(0,s.jsx)(K,{})]})}}),(0,s.jsx)(G,{control:eh.control,name:"repeat",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsx)(B,{children:"Repeat"}),(0,s.jsxs)(Q,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(Y,{children:(0,s.jsx)(ea,{children:(0,s.jsx)(ee,{placeholder:"When to repeat habit"})})}),(0,s.jsx)(el,{children:(0,s.jsxs)($,{children:[(0,s.jsx)(er,{value:"daily",children:"Daily"}),(0,s.jsx)(er,{value:"weekly",children:"Weekly"}),(0,s.jsx)(er,{value:"monthly",children:"Monthly"})]})})]}),(0,s.jsx)(K,{})]})}}),(0,s.jsx)(G,{control:eh.control,name:"startdate",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{className:"flex flex-col",children:[(0,s.jsx)(B,{children:"Start Date"}),(0,s.jsxs)(en,{children:[(0,s.jsx)(ed,{asChild:!0,children:(0,s.jsx)(Y,{children:(0,s.jsxs)(m.z,{variant:"outline",className:(0,f.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,U.WU)(a.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"}),(0,s.jsx)(D.Z,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(eo,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(eu,{mode:"single",selected:a.value,onSelect:a.onChange,initialFocus:!0})})]}),(0,s.jsx)(K,{})]})}})]})}),(0,s.jsx)(L,{...ef,children:(0,s.jsx)("form",{onSubmit:ef.handleSubmit(ep),className:"w-full flex flex-col gap-4",children:(0,s.jsx)(G,{control:ef.control,name:"email",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsx)(B,{children:"Invite Group Members"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(Y,{children:(0,s.jsx)(H,{...a,placeholder:"Email to send invite too"})}),(0,s.jsx)(m.z,{variant:"ghost",size:"icon",type:"submit",children:(0,s.jsx)(I.Z,{})})]}),(0,s.jsx)(K,{})]})}})})}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:es.map((e,a)=>(0,s.jsx)(d.Z,{variant:"p",className:"!mt-0",affects:"muted",children:e},a))}),(0,s.jsxs)(w,{children:[(0,s.jsx)(b,{children:(0,s.jsx)(m.z,{variant:"outline",type:"button",children:"Cancel"})}),(0,s.jsx)(m.z,{type:"submit",form:"habit-form",disabled:es.length<1,children:"Save"})]})]})]}):(0,s.jsxs)(eX,{open:q,onOpenChange:et,children:[(0,s.jsx)(eq,{asChild:!0,children:(0,s.jsxs)(m.z,{onClick:()=>{eh.reset(),ef.reset(),console.log("groupEmails: ",v),ei(null!=v?v:[]),T(null!=h?h:"Sun"),W(null!=x?x:"blue")},variant:a?"secondary":"default",disabled:Z,children:[a?(0,s.jsx)(z.Z,{}):(0,s.jsx)(I.Z,{}),a?"Edit Habit":"Add Habit"]})}),(0,s.jsxs)(e0,{className:"px-6",children:[(0,s.jsx)(e1,{className:"text-left px-0",children:(0,s.jsx)(e4,{children:"New Habit"})}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[(0,s.jsx)(L,{...eh,children:(0,s.jsxs)("form",{onSubmit:eh.handleSubmit(eb),className:"w-full flex flex-col gap-4",id:"habit-form",children:[(0,s.jsx)(G,{control:eh.control,name:"habitname",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsx)(B,{children:"Habit Name"}),(0,s.jsx)(Y,{children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(H,{...a,placeholder:"Habit Name"}),(0,s.jsx)(eJ,{color:A,icon:J,setColor:W,setIcon:T})]})}),(0,s.jsx)(K,{})]})}}),(0,s.jsx)(G,{control:eh.control,name:"goal",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsxs)(B,{children:["Goal"," ",(0,s.jsx)("span",{className:" text-muted-foreground ",children:"/per day"})]}),(0,s.jsxs)(Q,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(Y,{children:(0,s.jsx)(ea,{children:(0,s.jsx)(ee,{placeholder:"Number of times to perform habit in a day"})})}),(0,s.jsx)(el,{className:" max-h-48",children:(0,s.jsxs)($,{children:[(0,s.jsx)(er,{value:"1",children:"1"}),(0,s.jsx)(er,{value:"2",children:"2"}),(0,s.jsx)(er,{value:"3",children:"3"}),(0,s.jsx)(er,{value:"4",children:"4"}),(0,s.jsx)(er,{value:"5",children:"5"}),(0,s.jsx)(er,{value:"6",children:"6"}),(0,s.jsx)(er,{value:"7",children:"7"}),(0,s.jsx)(er,{value:"8",children:"8"}),(0,s.jsx)(er,{value:"9",children:"9"}),(0,s.jsx)(er,{value:"10",children:"10"}),(0,s.jsx)(er,{value:"11",children:"11"}),(0,s.jsx)(er,{value:"12",children:"12"})]})})]}),(0,s.jsx)(K,{})]})}}),(0,s.jsx)(G,{control:eh.control,name:"repeat",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsx)(B,{children:"Repeat"}),(0,s.jsxs)(Q,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(Y,{children:(0,s.jsx)(ea,{children:(0,s.jsx)(ee,{placeholder:"When to repeat habit"})})}),(0,s.jsx)(el,{children:(0,s.jsxs)($,{children:[(0,s.jsx)(er,{value:"daily",children:"Daily"}),(0,s.jsx)(er,{value:"weekly",children:"Weekly"}),(0,s.jsx)(er,{value:"monthly",children:"Monthly"})]})})]}),(0,s.jsx)(K,{})]})}}),(0,s.jsx)(G,{control:eh.control,name:"startdate",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{className:"flex flex-col",children:[(0,s.jsx)(B,{children:"Start Date"}),(0,s.jsxs)(en,{children:[(0,s.jsx)(ed,{asChild:!0,children:(0,s.jsx)(Y,{children:(0,s.jsxs)(m.z,{variant:"outline",className:(0,f.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,U.WU)(a.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"}),(0,s.jsx)(D.Z,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(eo,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(eu,{mode:"single",selected:a.value,onSelect:a.onChange,initialFocus:!0})})]}),(0,s.jsx)(K,{})]})}})]})}),(0,s.jsx)(L,{...ef,children:(0,s.jsx)("form",{onSubmit:ef.handleSubmit(ep),className:"w-full flex flex-col gap-4",children:(0,s.jsx)(G,{control:ef.control,name:"email",render:e=>{let{field:a}=e;return(0,s.jsxs)(O,{children:[(0,s.jsx)(B,{children:"Invite Group Members"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(Y,{children:(0,s.jsx)(H,{...a,placeholder:"Email to send invite too"})}),(0,s.jsx)(m.z,{variant:"ghost",size:"icon",type:"submit",children:(0,s.jsx)(I.Z,{})})]}),(0,s.jsx)(K,{})]})}})})}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:es.map((e,a)=>(0,s.jsx)(d.Z,{variant:"p",className:"!mt-0",affects:"muted",children:e},a))}),(0,s.jsxs)(w,{children:[(0,s.jsx)(b,{children:(0,s.jsx)(m.z,{variant:"outline",type:"button",children:"Cancel"})}),(0,s.jsx)(m.z,{type:"submit",form:"habit-form",children:"Save"})]})]}),(0,s.jsx)(e2,{})]})]})},aj=t(4205),ag=e=>{var a;let{habitName:t,goal:n,streak:o,totalSkipped:c,totalFailed:u,totalCompleted:x,completed:h,skipped:f,failed:p,hUID:j,uid:g,color:b,icon:v,tracked:y,manage:N,setManage:w,groupId:k,group:C,repeat:Z}=e,[D,z,I]=(0,i.d4)((0,l.hJ)(r.db,"groups/".concat(k,"/members"))),[R,H,U]=(0,i.d4)((0,l.hJ)(r.db,"users")),[E,P,F]=(0,i.Xi)((0,l.JU)(r.db,"users/".concat(g))),{muted:_,setMuted:V}=(0,aj.l)(),M=async()=>{await (0,l.r7)((0,l.JU)(r.db,"users",g,"habits",j),{completed:!0,tracked:!0,totalCompleted:x+1,totalCompletedWeekly:x+1,lastCompletedDate:(0,l.Bt)()}),await (0,l.r7)((0,l.JU)(r.db,"users",g),{habitCoins:(null==E?void 0:E.habitCoins)+1})},A=async()=>{await (0,l.r7)((0,l.JU)(r.db,"users",g,"habits",j),{skipped:!0,tracked:!0,totalSkipped:c+1})},L=async()=>{await (0,l.r7)((0,l.JU)(r.db,"users",g,"habits",j),{failed:!0,tracked:!0,totalFailed:u+1})},W=async()=>{await (0,l.oe)((0,l.JU)(r.db,"users",g,"habits",j)),console.log("group: ",C,"groupId: ",k),C&&k&&(console.log("trying to delete"),await (0,l.oe)((0,l.JU)(r.db,"groups",k,"members",g)),console.log("deleted"))},G=()=>{_?(0,ex.A)("The page is muted. Please unmute to play sounds."):new Audio("error.mp3").play()},J=()=>{_?(0,ex.A)("The page is muted. Please unmute to play sounds."):new Audio("skipped.mp3").play()},T=()=>{_?(0,ex.A)("The page is muted. Please unmute to play sounds."):new Audio("complete.mp3").play()};return(0,s.jsxs)("div",{className:"flex flex-col gap-4 border-b-2 border-muted py-4",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 w-full md:justify-between ",children:[(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsxs)(al.Z,{colorDirect:b,children:[" ",eG[v]," "]}),(0,s.jsx)(ae,{main:!0,title:t,description:n+" /times a day"})]}),(0,s.jsx)(ae,{title:"Streak \uD83D\uDD25",description:o+" day(s)"}),(0,s.jsx)(ae,{title:"Skipped",description:c.toString()}),(0,s.jsx)(ae,{title:"Failed",description:u.toString()}),(0,s.jsx)(ae,{title:"Completed",description:x.toString()}),N?(0,s.jsxs)("div",{className:"w-[311px] flex gap-4",children:[C?(0,s.jsx)(ap,{habitName:t,goal:n,repeat:"daily"==Z?"daily":"weekly"==Z?"weekly":"monthly",hUID:j,color:b,icon:v,edit:!0,groupEmails:null!==(a=null==D?void 0:D.map(e=>e.email))&&void 0!==a?a:[],groupID:k}):(0,s.jsx)(e6,{habitName:t,goal:n,repeat:"daily"==Z?"daily":"weekly"==Z?"weekly":"monthly",hUID:j,color:b,icon:v,edit:!0}),(0,s.jsxs)(m.z,{variant:"destructive",onClick:()=>{W(),w(!1),ex.A.info("Habit Deleted \uD83D\uDE22")},children:[(0,s.jsx)(as.Z,{})," Delete Habit"]})]}):y?h?(0,s.jsxs)("div",{className:"flex gap-4 items-center w-[311px] ",children:[(0,s.jsx)("div",{className:"flex h-9 w-9 bg-green-600 rounded-md text-white justify-center items-center ",children:(0,s.jsx)(S.Z,{})}),(0,s.jsx)(d.Z,{variant:"p",affects:"muted",className:"!mt-0",children:1==n?"Completed, log again tomorrow.":"Completed, log again in "+24/n+" hours"})]}):p?(0,s.jsxs)("div",{className:"flex gap-4 items-center w-[311px] ",children:[(0,s.jsx)("div",{className:"flex h-9 w-9 bg-destructive rounded-md text-white justify-center items-center ",children:(0,s.jsx)(aa.Z,{})}),(0,s.jsx)(d.Z,{variant:"p",affects:"muted",className:"!mt-0",children:1==n?"Failed, log again tomorrow.":"Failed, log again in "+24/n+" hours"})]}):f?(0,s.jsxs)("div",{className:"flex gap-4 items-center w-[311px] ",children:[(0,s.jsx)("div",{className:"flex h-9 w-9  bg-slate-600 rounded-md text-white justify-center items-center ",children:(0,s.jsx)(at.Z,{})}),(0,s.jsx)(d.Z,{variant:"p",affects:"muted",className:"!mt-0",children:1==n?"Skipped, log again tomorrow.":"Skipped, log again in "+24/n+" hours"})]}):(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{className:"flex gap-4 justify-between",children:[(0,s.jsxs)(m.z,{variant:"success",onClick:()=>{M(),T()},className:"w-full",children:[(0,s.jsx)(S.Z,{})," Done"]}),(0,s.jsxs)(m.z,{variant:"destructive",onClick:()=>{L(),G()},className:"w-full",children:[(0,s.jsx)(aa.Z,{})," Fail"]}),(0,s.jsxs)(m.z,{variant:"secondary",onClick:()=>{A(),J()},className:"w-full",children:[(0,s.jsx)(at.Z,{})," Skip"]})]})]}),C&&(0,s.jsx)("div",{className:"flex gap-2",children:null==D?void 0:D.map(e=>{var a;return"accepted"===e.status&&(0,s.jsx)(ai,{children:(0,s.jsxs)(an,{delayDuration:50,children:[(0,s.jsx)(ad,{children:(0,s.jsxs)(au,{children:[(0,s.jsx)(ax,{src:(null==R?void 0:null===(a=R.find(a=>a.uid===e.uid))||void 0===a?void 0:a.photoURL)||e.photoURL}),(0,s.jsx)(am,{children:e.displayName.toString().slice(0,1)})]})}),(0,s.jsx)(ao,{side:"top",children:(0,s.jsx)("p",{children:e.displayName})})]})})})})]})},ab=e=>{let{sortedHabits:a,user:t}=e,[l,r]=(0,c.useState)(!1),i=2*t.level,n=(null==a?void 0:a.length)>=i;return(0,s.jsxs)("div",{className:"flex flex-col gap-6 w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col w-full",children:[(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2 md:flex-row md:justify-between py-2 md:items-center",children:[(0,s.jsx)("div",{className:"flex gap-2 items-center",children:(0,s.jsx)(d.Z,{variant:"h4",children:"All Habits"})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(m.z,{variant:"outline",onClick:()=>r(!l),children:l?(0,s.jsx)(e7.Z,{}):(0,s.jsx)(e9.Z,{})}),(0,s.jsx)(e6,{isMaxHabits:n})]})]}),(0,s.jsx)("hr",{})]}),(null==a?void 0:a.length)>0?(0,s.jsx)("div",{className:"flex flex-col gap-4 w-full",children:null==a?void 0:a.map(e=>(0,s.jsx)(ag,{uid:(null==t?void 0:t.uid)?t.uid:"",habitName:e.habitName,goal:e.goal,streak:e.streak,totalCompleted:e.totalCompleted,totalFailed:e.totalFailed,totalSkipped:e.totalSkipped,completed:e.completed,skipped:e.skipped,failed:e.failed,hUID:e.hUID,color:e.color,icon:e.icon,tracked:e.tracked,manage:l,setManage:r,repeat:e.repeat},e.hUID))}):(0,s.jsxs)("div",{className:"flex flex-col gap-2 justify-center items-center",children:[(0,s.jsx)(x.default,{src:"FirstHabit.svg",alt:"Description",width:200,height:200}),(0,s.jsx)(d.Z,{variant:"h4",children:"Create a personal habit"}),(0,s.jsx)(d.Z,{variant:"p",affects:"muted",className:"!mt-0",children:"One habit at a time you can accomplish any goal you set out too!"})]})]})},av=e=>{let{sortedHabits:a,user:t}=e,[l,r]=(0,c.useState)(!1),i=t.level,n=(null==a?void 0:a.length)>=i;return(0,s.jsxs)("div",{className:"flex flex-col gap-6 w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col w-full",children:[(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2 md:flex-row md:justify-between py-2 md:items-center",children:[(0,s.jsx)(d.Z,{variant:"h4",children:"Group Habits"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(m.z,{variant:"outline",onClick:()=>r(!l),children:l?(0,s.jsx)(e7.Z,{}):(0,s.jsx)(e9.Z,{})}),(0,s.jsx)(ap,{isMaxHabits:n})]})]}),(0,s.jsx)("hr",{})]}),(null==a?void 0:a.length)>0?(0,s.jsx)("div",{className:"flex flex-col gap-4 w-full",children:null==a?void 0:a.map(e=>(0,s.jsx)(ag,{uid:(null==t?void 0:t.uid)?t.uid:"",habitName:e.habitName,goal:e.goal,streak:e.streak,totalCompleted:e.totalCompleted,totalFailed:e.totalFailed,totalSkipped:e.totalSkipped,completed:e.completed,skipped:e.skipped,failed:e.failed,hUID:e.hUID,color:e.color,icon:e.icon,tracked:e.tracked,manage:l,setManage:r,group:!0,groupId:e.groupID,repeat:e.repeat},e.hUID))}):(0,s.jsxs)("div",{className:"flex flex-col w-full gap-2 justify-center items-center",children:[(0,s.jsx)(x.default,{src:"GroupHabitsBlue.svg",height:200,width:200,alt:""}),(0,s.jsx)(d.Z,{variant:"h4",children:"Join or Create a Group Habit"}),(0,s.jsx)(d.Z,{variant:"p",affects:"muted",className:"!mt-0",children:"Group Habits allow you to complete habits as a group and keep each other on track with some friendly competition!"})]})]})},ay=e=>{let{percentage:a,pathColor:t}=e,l=49*Math.PI,r=t&&({blue:"stroke-blue-500",orange:"stroke-orange-500",red:"stroke-red-500",pink:"stroke-pink-500",purple:"stroke-purple-500",indigo:"stroke-indigo-500",cyan:"stroke-cyan-500",teal:"stroke-teal-500",green:"stroke-green-500",lime:"stroke-lime-500",yellow:"stroke-yellow-500",amber:"stroke-amber-500"})[t]||"",i=t&&({blue:"stroke-blue-100",orange:"stroke-orange-100",red:"stroke-red-100",pink:"stroke-pink-100",purple:"stroke-purple-100",indigo:"stroke-indigo-100",cyan:"stroke-cyan-100",teal:"stroke-teal-100",green:"stroke-green-100",lime:"stroke-lime-100",yellow:"stroke-yellow-100",amber:"stroke-amber-100"})[t]||"";return(0,s.jsx)("div",{style:{width:65,height:65,position:"relative"},children:(0,s.jsxs)("svg",{height:65,width:65,viewBox:"0 0 ".concat(65," ").concat(65),className:"rotate-[".concat(-90,"deg]"),children:[(0,s.jsx)("circle",{className:"background-progress-bar ".concat(i),stroke:"#f3f4f6",fill:"transparent",strokeWidth:8,r:24.5,cx:32.5,cy:32.5}),(0,s.jsx)("circle",{className:"progress-bar ".concat(r),stroke:t,fill:"transparent",strokeWidth:8,strokeDasharray:"".concat(l," ").concat(l),style:{strokeDashoffset:Math.round(l-a/100*l)},r:24.5,cx:32.5,cy:32.5,strokeLinecap:"round"}),(0,s.jsxs)("text",{x:"50%",y:"50%",textAnchor:"middle",strokeWidth:"0.5px",dy:".3em",transform:"rotate(-".concat(-90," ").concat(32.5," ").concat(32.5,")"),style:{fontSize:"".concat(13,"px")},className:"fill-foreground",children:[Math.round(a),"%"]})]})})},aN=e=>{let{habitName:a,icon:t,color:l,completePercent:r}=e;return(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between w-full border rounded-lg p-3 gap-3",children:[(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,s.jsx)(al.Z,{color:l,children:eG[t]}),(0,s.jsx)(d.Z,{variant:"p",className:"!mt-0 text-base font-bold",children:a})]}),(0,s.jsx)(ay,{percentage:r,pathColor:l})]})},aw=e=>{let{title:a,number:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col bg-foreground/5 rounded-lg w-full p-3 gap-3",children:[(0,s.jsx)(d.Z,{variant:"p",affects:"muted",className:"!mt-0",children:a}),(0,s.jsx)(d.Z,{variant:"h3",className:"!mt-0",children:t})]})},ak=e=>{let{habits:a,user:t}=e,r=new Date,i=new Date(r.getTime()-6048e5),n=a.filter(e=>{let a;return e.lastCompletedDate instanceof l.EK&&(a=e.lastCompletedDate.toDate()),a>=i&&a<=r}),o=n.reduce((e,a)=>e+(a.completed?1:0),0),c=n.length,u=c>0?(o/c*100).toFixed(0):0,m=(o/a.length*100).toFixed(0),h=0,f=0;return a.forEach(e=>{if(e.completed){let a=new Date(e.lastCompletedDate);1===Math.ceil(Math.abs(r.getTime()-a.getTime())/864e5)?f++:(h=Math.max(h,f),f=0)}}),h=Math.max(h,f),(0,s.jsxs)("div",{className:"flex flex-col gap-6 w-full",children:[(0,s.jsx)("div",{className:"flex flex-col w-full",children:(0,s.jsxs)("div",{className:"flex border-b-2 border-lead w-full pb-3 items-center gap-2",children:[(0,s.jsx)(d.Z,{variant:"h4",children:"Analytics"}),(0,s.jsx)(d.Z,{variant:"p",affects:"muted",className:"!mt-0",children:"Last 7 days"})]})}),a.length>0?(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-5 mt-3 flex-grow md:flex-row",children:[(0,s.jsx)(aw,{title:"Total Habits Completed",number:o}),(0,s.jsx)(aw,{title:"Weekly Progress",number:u.toString()+"%"}),(0,s.jsx)(aw,{title:"Habit Completion Rate",number:m.toString()+"%"}),(0,s.jsx)(aw,{title:"Longest Streak",number:h.toString()+" days \uD83D\uDD25"})]}),(0,s.jsx)("div",{className:"mt-10",children:(0,s.jsx)(d.Z,{variant:"p",affects:"lead",className:"!mt-0 text-base",children:"Percent of Habits Completed"})}),(0,s.jsx)("div",{className:"flex flex-col gap-5 mt-3 flex-grow md:flex-row",children:null==a?void 0:a.map(e=>(0,s.jsx)(aN,{habitName:e.habitName,icon:e.icon,color:e.color,completePercent:e.totalCompletedWeekly/(7*e.goal)*100||0}))})]}):(0,s.jsxs)("div",{className:"flex w-full gap-6 items-center p-3 bg-slate-100 rounded-lg",children:[(0,s.jsx)(x.default,{src:"AnalyticsEmpty.svg",height:60,width:60,alt:""}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(d.Z,{variant:"h4",children:"Start tracking your habits to see a weekly analytics."}),(0,s.jsx)(d.Z,{variant:"p",affects:"muted",className:"!mt-0",children:"Start making and tracking habits and come back to see your weekly analytics."})]})]})]})},aC=t(3395),aZ=t(8733),aS=()=>{let{muted:e,setMuted:a}=(0,aj.l)();return(0,s.jsx)("div",{className:"p-4 rounded-full bg-slate-900 shadow-xl flex justify-center items-center fixed bottom-10 right-10 cursor-pointer",onClick:()=>{a(!e)},children:e?(0,s.jsx)(aC.Z,{className:" text-red-600"}):(0,s.jsx)(aZ.Z,{className:" text-white"})})},aD=t(8062),az=t(5002),aI=e=>{let{photoURL:a}=e,[t,l,d]=(0,n.F_)(r.I8),[c,u,x]=(0,i.d4)((0,az.hJ)(r.db,"profilePhotos")),[m,h,f]=(0,i.Xi)((0,az.JU)(r.db,"users/".concat(null==t?void 0:t.uid)));c&&!u&&c.sort((e,a)=>e.coins-a.coins);let p=async(e,a)=>{if(t&&(null==m?void 0:m.habitCoins)>=a){var s;if(null==m?void 0:null===(s=m.unlockedPhotos)||void 0===s?void 0:s.includes(e))await (0,az.r7)((0,az.JU)(r.db,"users",t.uid),{photoURL:e});else{let s=null==m?void 0:m.unlockedPhotos;await (0,az.r7)((0,az.JU)(r.db,"users",t.uid),{unlockedPhotos:[...s,e],photoURL:e,habitCoins:(null==m?void 0:m.habitCoins)-a})}}},j=async()=>{t&&await (0,az.r7)((0,az.JU)(r.db,"users",t.uid),{photoURL:t.photoURL})};return(0,s.jsx)("div",{children:(0,s.jsxs)(en,{children:[(0,s.jsx)(ed,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:a,height:70,width:70,alt:"",className:"rounded-full"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-slate-900 bg-opacity-0 hover:bg-opacity-60 rounded-full flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300",children:(0,s.jsx)(aD.Z,{className:"text-white"})})]})}),(0,s.jsx)(eo,{align:"start",className:"w-64",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-1 gap-y-2",children:[(0,s.jsxs)("div",{className:"relative cursor-pointer",onClick:j,children:[(0,s.jsx)("img",{src:(null==t?void 0:t.photoURL)||"",height:50,width:50,alt:"",className:"rounded-full"}),(0,s.jsx)("div",{className:"absolute inset-0 text-white bg-slate-900 bg-opacity-0 hover:bg-opacity-60 rounded-full flex items-center gap-1 justify-center transition-opacity duration-300 ".concat(a===(null==t?void 0:t.photoURL)?"border-2 border-primary":"","  ")})]}),null==c?void 0:c.map(e=>{var t;return(0,s.jsxs)("div",{className:"relative cursor-pointer",onClick:()=>p(e.photoURL,e.coins),children:[(0,s.jsx)("img",{src:e.photoURL,height:50,width:50,alt:"",className:"rounded-full"}),(null==m?void 0:null===(t=m.unlockedPhotos)||void 0===t?void 0:t.includes(e.photoURL))?(0,s.jsx)("div",{className:"absolute inset-0 text-white bg-slate-900 bg-opacity-0 hover:bg-opacity-60 rounded-full flex items-center gap-1 justify-center transition-opacity duration-300 ".concat(a===e.photoURL?"border-2 border-primary":"","  ")}):(0,s.jsx)("div",{className:"absolute inset-0 text-white bg-slate-900 bg-opacity-70 hover:bg-opacity-60 rounded-full ",children:(0,s.jsxs)("div",{className:"flex gap-1 p-2 w-full h-full items-center opacity-0 hover:opacity-100 transition-opacity duration-300",children:[(0,s.jsx)(o.Z,{className:"w-6"})," ",e.coins]})})]})})]})})]})})},aR=()=>{let[e,a,t]=(0,n.F_)(r.I8),[x,m,h]=(0,i.d4)((0,l.hJ)(r.db,"users/".concat(null==e?void 0:e.uid,"/habits"))),[f,p,j]=(0,i.Xi)((0,l.JU)(r.db,"users/".concat(null==e?void 0:e.uid))),g=null==x?void 0:x.filter(e=>!e.groupID),b=null==x?void 0:x.filter(e=>e.groupID),v=null==g?void 0:g.slice().sort((e,a)=>e.timestamp-a.timestamp),y=null==b?void 0:b.slice().sort((e,a)=>e.timestamp-a.timestamp);(0,c.useEffect)(()=>{a||e||(window.location.href="/login")},[a,e]);let[N,w]=(0,c.useState)(1),k=e=>{e>=0&&e<10?w(1):e>=10&&e<20?w(2):e>=20&&e<30?w(3):e>=30&&e<40?w(4):e>=40&&e<50&&w(5)};(0,c.useEffect)(()=>{f&&(k(f.habitScore),C()),console.log("updated level")});let C=async()=>{await (0,l.r7)((0,l.JU)(r.db,"users",(null==e?void 0:e.uid)||""),{level:N})};return(0,s.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-between p-8 md:p-24",children:[(0,s.jsx)(aS,{}),m?(0,s.jsx)(u.Z,{className:"animate-spin"}):(0,s.jsx)("div",{className:"flex flex-col gap-12 w-full",children:(null==x?void 0:x.length)===0?(0,s.jsx)(e8,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-4 flex-col items-start md:items-center text-left md:flex-row w-full",children:[(null==f?void 0:f.photoURL)&&(0,s.jsx)(aI,{photoURL:f.photoURL}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)(d.Z,{variant:"h2",children:[function(){let e=new Date().getHours();return e<12?"Good Morning":e>=12&&e<19?"Good Afternoon":"Good Night"}(),", ",null==e?void 0:e.displayName]}),(0,s.jsxs)(d.Z,{variant:"p",affects:"muted",className:"!mt-0",children:["You are currently at Level ",N,","," ",5!=N?"level up by completing habits and earning HabitCoins.":"Max level reached, keep up the good work!"]})]}),(0,s.jsxs)("div",{className:"flex flex-row md:flex-col items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(d.Z,{variant:"h2",children:null==f?void 0:f.habitCoins}),(0,s.jsx)(o.Z,{className:"text-amber-500 "})]}),(0,s.jsx)(d.Z,{variant:"p",affects:"muted",className:"!mt-0",children:"HabitCoins"})]})]}),(0,s.jsx)(ab,{sortedHabits:v,user:f}),(0,s.jsx)(av,{sortedHabits:y,user:f}),(0,s.jsx)(ak,{user:f,habits:x})]})})]})}},4205:function(e,a,t){"use strict";t.d(a,{MuteProvider:function(){return i},l:function(){return n}});var s=t(7437),l=t(2265);let r=(0,l.createContext)({muted:!1,setMuted:()=>{}}),i=e=>{let{children:a}=e,[t,i]=(0,l.useState)(!1);return(0,s.jsx)(r.Provider,{value:{muted:t,setMuted:i},children:a})},n=()=>(0,l.useContext)(r)},5797:function(e,a,t){"use strict";var s=t(7437);t(2265),a.Z=e=>{let{color:a,children:t,colorDirect:l}=e;return(0,s.jsx)("div",{className:"p-3 rounded-full w-fit h-fit ".concat(a?({blue:"bg-blue-100 text-blue-500",orange:"bg-orange-100 text-orange-500",red:"bg-red-100 text-red-500",pink:"bg-pink-100 text-pink-500",purple:"bg-purple-100 text-purple-500",indigo:"bg-indigo-100 text-indigo-500",cyan:"bg-cyan-100 text-cyan-500",teal:"bg-teal-100 text-teal-500",green:"bg-green-100 text-green-500",lime:"bg-lime-100 text-lime-500",yellow:"bg-yellow-100 text-yellow-500",amber:"bg-amber-100 text-amber-500"})[a]:""," bg-").concat(l,"-100 text-").concat(l,"-500"),children:t})}},495:function(e,a,t){"use strict";t.d(a,{d:function(){return d},z:function(){return o}});var s=t(7437),l=t(2265),r=t(1538),i=t(2218),n=t(7440);let d=(0,i.j)("flex gap-2 items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",success:"bg-green-600 text-primary-foreground shadow hover:bg-green-600/90",destructive:"bg-destructive text-primary-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",black:"bg-foreground text-primary-foreground shadow hover:bg-foreground/90 ",audioPrimary:"bg-primary text-primary-foreground shadow hover:bg-primary/90 !h-16 !w-16 rounded-full",audioSecondary:"bg-background border border-input text-secondary-foreground shadow-sm hover:bg-accent hover:text-accent-foreground !h-16 !w-16 rounded-full"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=l.forwardRef((e,a)=>{let{className:t,variant:l,size:i,asChild:o=!1,...c}=e,u=o?r.g7:"button";return(0,s.jsx)(u,{className:(0,n.cn)(d({variant:l,size:i,className:t})),ref:a,...c})});o.displayName="Button"},9870:function(e,a,t){"use strict";var s=t(7437),l=t(7440),r=t(2218),i=t(2265);let n=(0,r.j)("text-xl",{variants:{variant:{h1:"scroll-m-20 text-4xl font-extrabold tracking-tight lg: text-5xl",h2:"scroll-m-20 text-3xl font-semibold tracking-tight first:mt-0",h3:"scroll-m-20 text-2xl font-semibold tracking-tight",h4:"scroll-m-20 text-xl font-semibold tracking-tight",p:"leading-7 [&:not(:first-child)]:mt-6"},affects:{default:"",lead:"text-xl text-muted-foreground",large:"text-lg font-semibold",small:"text-sm font-medium leading-none",muted:"text-sm text-muted-foreground",removePMargin:"[&:not(:first-child)]:mt-0"}},defaultVariants:{variant:"h1",affects:"default"}}),d=i.forwardRef((e,a)=>{let{className:t,variant:r,affects:i,...d}=e,o=r||"p";return(0,s.jsx)(o,{className:(0,l.cn)(n({variant:r,affects:i,className:t})),ref:a,...d})});d.displayName="H1",a.Z=d},9165:function(e,a,t){"use strict";let s;t.d(a,{Fw:function(){return s},I8:function(){return c},RA:function(){return x},db:function(){return u}});var l=t(5186),r=t(9842),i=t(5236),n=t(4742);let d={apiKey:"AIzaSyCKiZ8-lZE8z9eHWEW4ZnwfAfcKwQp8tPQ",authDomain:"habitforge-1832c.firebaseapp.com",projectId:"habitforge-1832c",storageBucket:"habitforge-1832c.appspot.com",messagingSenderId:"346207026425",appId:"1:346207026425:web:7a0d4efdef194a41697628",measurementId:t(357).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},o=(0,i.C6)().length>0?(0,i.Mq)():(0,i.ZF)(d),c=(0,l.v0)(o),u=(0,r.ad)(o);(async()=>{await (0,n.Gb)()?s=(0,n.KL)(o):console.warn("Firebase Messaging is not supported by your browser")})();let x=async()=>{if(!s){console.warn("Firebase Messaging is not supported by your browser");return}let e=await Notification.requestPermission();console.log(e),"granted"===e&&console.log(await (0,n.LP)(s,{vapidKey:"BMmOSKYwe4lOgqvySO20jpnvsKIR9igPKfylpVG-IElVpqibZE-syt22hlakB3Y0Krur4ethF8G0vD6zzfVIMRc"}))}},7440:function(e,a,t){"use strict";t.d(a,{cn:function(){return r}});var s=t(4839),l=t(6164);function r(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,l.m6)((0,s.W)(a))}}},function(e){e.O(0,[358,220,310,311,648,708,986,971,23,744],function(){return e(e.s=9546)}),_N_E=e.O()}]);